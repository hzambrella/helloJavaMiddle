package proxy;

import static org.junit.Assert.*;
import net.sf.cglib.proxy.Enhancer;
import net.sf.cglib.proxy.Proxy;

import org.junit.Test;

public class TestTargetProxyCglib {
	/**
	 * 测试拦截器实现的子类代理
	 * 
	 */
	@Test
	public void test1() {
		TargetBusiness target = new TargetBusiness();
		TargetProxyCglibInterceptor proxyCglib = new TargetProxyCglibInterceptor(
				target);
		// 动态地返回代理对象TargetBusiness，父类引用指向子类对象。
		TargetBusiness tb = (TargetBusiness) proxyCglib.createProxy();
		tb.business();
		tb.business2();
	}

	/** 
	 * 测试过滤器实现的子类代理
	 */
	@Test
	public void test2() {
		TargetBusiness target = new TargetBusiness();
		// 工具类
		Enhancer enhancer = new Enhancer();
		// 设置父类
		enhancer.setSuperclass(TargetBusiness.class);
		TargetCglibCallbackFilter tf = new TargetCglibCallbackFilter();
		 Callback noopCb=NoOp.INSTANCE; 

	}

}
