package springMavenPluto;

import static org.junit.Assert.*;

import java.util.Map;

import javax.annotation.Resource;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;

import springMavenPluto.View.Result;
import springMavenPluto.model.MobileBookModel;
import springMavenPluto.service.mobileBookApi;

import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@SuppressWarnings("rawtypes")
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:applicationContext.xml"})
public class TestMobileBook {
	@Resource(name="mobileBookApi")
	private mobileBookApi mba;

	@Test
	public void testGet() {
		Result result=mba.getMobileByUserId(1);
		Map map=result.getMap();
		System.out.println(map);
	}
	
	@Test
	public void testAdd() {
		Result result=mba.addMobileByUserId(1, "ambrella", "110110");
		assertEquals(((Map) result.getMap().get("result")).get("number"), "110110");
		assertEquals(((Map) result.getMap().get("result")).get("name"), "ambrella");
		Integer id=Integer.parseInt(((Map) result.getMap().get("result")).get("id")) ;
		System.out.println(id);
		mba.updateMobileById(id, null, "12313");
		Result result2=mba.getMobileById(id);
		assertEquals(result2.getMap().get("number"), 12313);
		mba.removeMobileByUserId(id);
		//result.getMap();
		//mba.removeMobileByUserId(id);
	}
}
